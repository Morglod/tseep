!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).TSEEP=t()}}((function(){var define,module,exports,_$types_6={};Object.defineProperty(_$types_6,"__esModule",{value:!0});var _$bakeCollection_3={};Object.defineProperty(_$bakeCollection_3,"__esModule",{value:!0}),_$bakeCollection_3.bakeCollectionAwait=_$bakeCollection_3.bakeCollection=_$bakeCollection_3.BAKED_EMPTY_FUNC=void 0,_$bakeCollection_3.BAKED_EMPTY_FUNC=function(){};var FORLOOP_FALLBACK=1500;function generateArgsDefCode(t){var e="";if(0===t)return e;for(var n=0;n<t-1;++n)e+="arg"+String(n)+", ";return e+"arg"+String(t-1)}function generateBodyPartsCode(t,e){for(var n="",i="",o=0;o<e;++o)n+="var f".concat(o," = collection[").concat(o,"];\n"),i+="f".concat(o,"(").concat(t,")\n");return{funcDefCode:n,funcCallCode:i}}function generateBodyPartsVariadicCode(t){for(var e="",n="",i=0;i<t;++i)e+="var f".concat(i," = collection[").concat(i,"];\n"),n+="f".concat(i,".apply(undefined, arguments)\n");return{funcDefCode:e,funcCallCode:n}}function bakeCollection(collection,fixedArgsNum){if(0===collection.length)return _$bakeCollection_3.BAKED_EMPTY_FUNC;if(1===collection.length)return collection[0];var funcFactoryCode;if(collection.length<FORLOOP_FALLBACK){var argsDefCode=generateArgsDefCode(fixedArgsNum),_a=generateBodyPartsCode(argsDefCode,collection.length),funcDefCode=_a.funcDefCode,funcCallCode=_a.funcCallCode;funcFactoryCode="(function(collection) {\n            ".concat(funcDefCode,"\n            collection = undefined;\n            return (function(").concat(argsDefCode,") {\n                ").concat(funcCallCode,"\n            });\n        })")}else{var argsDefCode=generateArgsDefCode(fixedArgsNum);funcFactoryCode=collection.length%10==0?"(function(collection) {\n                return (function(".concat(argsDefCode,") {\n                    for (var i = 0; i < collection.length; i += 10) {\n                        collection[i](").concat(argsDefCode,");\n                        collection[i+1](").concat(argsDefCode,");\n                        collection[i+2](").concat(argsDefCode,");\n                        collection[i+3](").concat(argsDefCode,");\n                        collection[i+4](").concat(argsDefCode,");\n                        collection[i+5](").concat(argsDefCode,");\n                        collection[i+6](").concat(argsDefCode,");\n                        collection[i+7](").concat(argsDefCode,");\n                        collection[i+8](").concat(argsDefCode,");\n                        collection[i+9](").concat(argsDefCode,");\n                    }\n                });\n            })"):collection.length%4==0?"(function(collection) {\n                return (function(".concat(argsDefCode,") {\n                    for (var i = 0; i < collection.length; i += 4) {\n                        collection[i](").concat(argsDefCode,");\n                        collection[i+1](").concat(argsDefCode,");\n                        collection[i+2](").concat(argsDefCode,");\n                        collection[i+3](").concat(argsDefCode,");\n                    }\n                });\n            })"):collection.length%3==0?"(function(collection) {\n                return (function(".concat(argsDefCode,") {\n                    for (var i = 0; i < collection.length; i += 3) {\n                        collection[i](").concat(argsDefCode,");\n                        collection[i+1](").concat(argsDefCode,");\n                        collection[i+2](").concat(argsDefCode,");\n                    }\n                });\n            })"):"(function(collection) {\n                return (function(".concat(argsDefCode,") {\n                    for (var i = 0; i < collection.length; ++i) {\n                        collection[i](").concat(argsDefCode,");\n                    }\n                });\n            })")}var bakeCollection_1=void 0,fixedArgsNum_1=void 0,bakeCollectionVariadic_1=void 0,bakeCollectionAwait_1=void 0,funcFactory=eval(funcFactoryCode);return funcFactory(collection)}function bakeCollectionAwait(collection,fixedArgsNum){if(0===collection.length)return _$bakeCollection_3.BAKED_EMPTY_FUNC;if(1===collection.length)return collection[0];var funcFactoryCode;if(collection.length<FORLOOP_FALLBACK){var argsDefCode=generateArgsDefCode(fixedArgsNum),_a=generateBodyPartsCode(argsDefCode,collection.length),funcDefCode=_a.funcDefCode,funcCallCode=_a.funcCallCode;funcFactoryCode="(function(collection) {\n            ".concat(funcDefCode,"\n            collection = undefined;\n            return (function(").concat(argsDefCode,") {\n                return Promise.all([ ").concat(funcCallCode," ]);\n            });\n        })")}else{var argsDefCode=generateArgsDefCode(fixedArgsNum);funcFactoryCode="(function(collection) {\n            return (function(".concat(argsDefCode,") {\n                var promises = Array(collection.length);\n                for (var i = 0; i < collection.length; ++i) {\n                    promises[i] = collection[i](").concat(argsDefCode,");\n                }\n                return Promise.all(promises);\n            });\n        })")}var bakeCollection_2=void 0,fixedArgsNum_2=void 0,bakeCollectionVariadic_2=void 0,bakeCollectionAwait_2=void 0,funcFactory=eval(funcFactoryCode);return funcFactory(collection)}function bakeCollectionVariadic(collection){if(0===collection.length)return _$bakeCollection_3.BAKED_EMPTY_FUNC;if(1===collection.length)return collection[0];var funcFactoryCode;if(collection.length<FORLOOP_FALLBACK){var _a=generateBodyPartsVariadicCode(collection.length),funcDefCode=_a.funcDefCode,funcCallCode=_a.funcCallCode;funcFactoryCode="(function(collection) {\n            ".concat(funcDefCode,"\n            collection = undefined;\n            return (function() {\n                ").concat(funcCallCode,"\n            });\n        })")}else funcFactoryCode="(function(collection) {\n            return (function() {\n                for (var i = 0; i < collection.length; ++i) {\n                    collection[i].apply(undefined, arguments);\n                }\n            });\n        })";var bakeCollection_3=void 0,fixedArgsNum=void 0,bakeCollectionVariadic_3=void 0,bakeCollectionAwait_3=void 0,funcFactory=eval(funcFactoryCode);return funcFactory(collection)}_$bakeCollection_3.bakeCollection=bakeCollection,_$bakeCollection_3.bakeCollectionAwait=bakeCollectionAwait;var _$taskCollection_5={},__spreadArray=this&&this.__spreadArray||function(t,e,n){if(n||2===arguments.length)for(var i,o=0,s=e.length;o<s;o++)!i&&o in e||(i||(i=Array.prototype.slice.call(e,0,o)),i[o]=e[o]);return t.concat(i||Array.prototype.slice.call(e))};function push_norebuild(t,e){var n,i=this.length;if(i>1)e?((n=this._tasks).push.apply(n,arguments),this.length+=arguments.length):(this._tasks.push(t),this.length++);else if(e){var o;1===i?((o=Array(1+arguments.length)).push(o),o.push.apply(o,arguments),this._tasks=o):((o=Array(arguments.length)).push.apply(o,arguments),this._tasks=o),this.length+=arguments.length}else this._tasks=1===i?[this._tasks,t]:t,this.length++}function push_rebuild(t,e){var n,i=this.length;if(i>1)e?((n=this._tasks).push.apply(n,arguments),this.length+=arguments.length):(this._tasks.push(t),this.length++);else if(e){var o;1===i?((o=Array(1+arguments.length)).push(o),o.push.apply(o,arguments),this._tasks=o):((o=Array(arguments.length)).push.apply(o,arguments),this._tasks=o),this.length+=arguments.length}else this._tasks=1===i?[this._tasks,t]:t,this.length++;this.firstEmitBuildStrategy?this.call=rebuild_on_first_call:this.rebuild()}function _fast_remove_single(t,e){-1!==e&&(0===e?t.shift():e===t.length-1?t.length=t.length-1:t.splice(e,1))}function removeLast_norebuild(t){0!==this.length&&(1===this.length?this._tasks===t&&(this.length=0):(_fast_remove_single(this._tasks,this._tasks.lastIndexOf(t)),1===this._tasks.length?(this._tasks=this._tasks[0],this.length=1):this.length=this._tasks.length))}function removeLast_rebuild(t){if(0!==this.length){if(1===this.length)return this._tasks===t&&(this.length=0),this.firstEmitBuildStrategy?void(this.call=_$bakeCollection_3.BAKED_EMPTY_FUNC):void this.rebuild();_fast_remove_single(this._tasks,this._tasks.lastIndexOf(t)),1===this._tasks.length?(this._tasks=this._tasks[0],this.length=1):this.length=this._tasks.length,this.firstEmitBuildStrategy?this.call=rebuild_on_first_call:this.rebuild()}}function insert_norebuild(t){for(var e,n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];0===this.length?(this._tasks=n,this.length=1):1===this.length?(n.unshift(this._tasks),this._tasks=n,this.length=this._tasks.length):((e=this._tasks).splice.apply(e,__spreadArray([t,0],n,!1)),this.length=this._tasks.length)}function insert_rebuild(t){for(var e,n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];0===this.length?(this._tasks=n,this.length=1):1===this.length?(n.unshift(this._tasks),this._tasks=n,this.length=this._tasks.length):((e=this._tasks).splice.apply(e,__spreadArray([t,0],n,!1)),this.length=this._tasks.length),this.firstEmitBuildStrategy?this.call=rebuild_on_first_call:this.rebuild()}function rebuild_noawait(){0===this.length?this.call=_$bakeCollection_3.BAKED_EMPTY_FUNC:1===this.length?this.call=this._tasks:this.call=(0,_$bakeCollection_3.bakeCollection)(this._tasks,this.argsNum)}function rebuild_await(){0===this.length?this.call=_$bakeCollection_3.BAKED_EMPTY_FUNC:1===this.length?this.call=this._tasks:this.call=(0,_$bakeCollection_3.bakeCollectionAwait)(this._tasks,this.argsNum)}function rebuild_on_first_call(){this.rebuild(),this.call.apply(void 0,arguments)}Object.defineProperty(_$taskCollection_5,"__esModule",{value:!0}),_$taskCollection_5.TaskCollection=_$taskCollection_5._fast_remove_single=void 0,_$taskCollection_5._fast_remove_single=_fast_remove_single;var TaskCollection=function(t,e,n,i){void 0===e&&(e=!0),void 0===n&&(n=null),void 0===i&&(i=!1),this.awaitTasks=i,this.call=_$bakeCollection_3.BAKED_EMPTY_FUNC,this.argsNum=t,this.firstEmitBuildStrategy=!0,this.rebuild=i?rebuild_await.bind(this):rebuild_noawait.bind(this),this.setAutoRebuild(e),n?"function"==typeof n?(this._tasks=n,this.length=1):(this._tasks=n,this.length=n.length):(this._tasks=null,this.length=0),e&&this.rebuild()};_$taskCollection_5.TaskCollection=TaskCollection,TaskCollection.prototype.fastClear=function(){this._tasks=null,this.length=0,this.call=_$bakeCollection_3.BAKED_EMPTY_FUNC},TaskCollection.prototype.clear=function(){this._tasks=null,this.length=0,this.call=_$bakeCollection_3.BAKED_EMPTY_FUNC},TaskCollection.prototype.growArgsNum=function(t){this.argsNum<t&&(this.argsNum=t,this.firstEmitBuildStrategy?this.call=rebuild_on_first_call:this.rebuild())},TaskCollection.prototype.setAutoRebuild=function(t){t?(this.push=push_rebuild.bind(this),this.insert=insert_rebuild.bind(this),this.removeLast=removeLast_rebuild.bind(this)):(this.push=push_norebuild.bind(this),this.insert=insert_norebuild.bind(this),this.removeLast=removeLast_norebuild.bind(this))},TaskCollection.prototype.tasksAsArray=function(){return 0===this.length?[]:1===this.length?[this._tasks]:this._tasks},TaskCollection.prototype.setTasks=function(t){0===t.length?(this.length=0,this.call=_$bakeCollection_3.BAKED_EMPTY_FUNC):1===t.length?(this.length=1,this.call=t[0],this._tasks=t[0]):(this.length=t.length,this._tasks=t,this.firstEmitBuildStrategy?this.call=rebuild_on_first_call:this.rebuild())};var _$taskCollection_4={},__createBinding=this&&this.__createBinding||(Object.create?function(t,e,n,i){void 0===i&&(i=n);var o=Object.getOwnPropertyDescriptor(e,n);o&&!("get"in o?!e.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,i,o)}:function(t,e,n,i){void 0===i&&(i=n),t[i]=e[n]}),__exportStar=this&&this.__exportStar||function(t,e){for(var n in t)"default"===n||Object.prototype.hasOwnProperty.call(e,n)||__createBinding(e,t,n)};Object.defineProperty(_$taskCollection_4,"__esModule",{value:!0}),__exportStar(_$taskCollection_5,_$taskCollection_4);var _$utils_7={};Object.defineProperty(_$utils_7,"__esModule",{value:!0}),_$utils_7.nullObj=void 0,_$utils_7.nullObj=function(){return{__proto__:null,prototype:null}};var _$ee_1={},____spreadArray_1=this&&this.__spreadArray||function(t,e,n){if(n||2===arguments.length)for(var i,o=0,s=e.length;o<s;o++)!i&&o in e||(i||(i=Array.prototype.slice.call(e,0,o)),i[o]=e[o]);return t.concat(i||Array.prototype.slice.call(e))};function emit(t,e,n,i,o,s){var l=this.events[t];return!!l&&0!==l.length&&(l.argsNum<6?l.call(e,n,i,o,s):l.call.apply(void 0,arguments),!0)}function emitHasOnce(t,e,n,i,o,s){var l=this.events[t];if(l){if(0===l.length)return!1;l.argsNum<6?l.call(e,n,i,o,s):l.call.apply(void 0,arguments)}var r=this.onceEvents[t];if(r){if("function"==typeof r)this.onceEvents[t]=void 0,arguments.length<6?r(e,n,i,o,s):r.apply(void 0,arguments);else{var c=r;if(this.onceEvents[t]=void 0,arguments.length<6)for(var a=0;a<c.length;++a)c[a](e,n,i,o,s);else for(a=0;a<c.length;++a)c[a].apply(void 0,arguments)}return!0}return!!l}Object.defineProperty(_$ee_1,"__esModule",{value:!0}),_$ee_1.EventEmitter=void 0;var EventEmitter=function(){function t(){this.events=(0,_$utils_7.nullObj)(),this.onceEvents=(0,_$utils_7.nullObj)(),this._symbolKeys=new Set,this.maxListeners=1/0}return Object.defineProperty(t.prototype,"_eventsCount",{get:function(){return this.eventNames().length},enumerable:!1,configurable:!0}),t}();function addListener(t,e,n){if(void 0===n&&(n=e.length),"function"!=typeof e)throw new TypeError("The listener must be a function");var i=this.events[t];return i?(i.push(e),i.growArgsNum(n),this.maxListeners!==1/0&&this.maxListeners<=i.length&&console.warn('Maximum event listeners for "'.concat(String(t),'" event!'))):(this.events[t]=new _$taskCollection_4.TaskCollection(n,!0,e,!1),"symbol"==typeof t&&this._symbolKeys.add(t)),this}function removeListener(t,e){var n=this.events[t];n&&n.removeLast(e);var i=this.onceEvents[t];return i&&("function"==typeof i?this.onceEvents[t]=void 0:"object"==typeof i&&(1===i.length&&i[0]===e?this.onceEvents[t]=void 0:(0,_$taskCollection_4._fast_remove_single)(i,i.lastIndexOf(e)))),this}_$ee_1.EventEmitter=EventEmitter,EventEmitter.prototype.emit=emit,EventEmitter.prototype.on=addListener,EventEmitter.prototype.once=function(t,e){switch(this.emit===emit&&(this.emit=emitHasOnce),typeof this.onceEvents[t]){case"undefined":this.onceEvents[t]=e,"symbol"==typeof t&&this._symbolKeys.add(t);break;case"function":this.onceEvents[t]=[this.onceEvents[t],e];break;case"object":this.onceEvents[t].push(e)}return this},EventEmitter.prototype.addListener=addListener,EventEmitter.prototype.removeListener=removeListener,EventEmitter.prototype.hasListeners=function(t){return this.events[t]&&!!this.events[t].length},EventEmitter.prototype.prependListener=function(t,e,n){if(void 0===n&&(n=e.length),"function"!=typeof e)throw new TypeError("The listener must be a function");var i=this.events[t];return i&&i instanceof _$taskCollection_4.TaskCollection?(i.insert(0,e),i.growArgsNum(n),this.maxListeners!==1/0&&this.maxListeners<=i.length&&console.warn('Maximum event listeners for "'.concat(String(t),'" event!'))):(i=this.events[t]=new _$taskCollection_4.TaskCollection(n,!0,e,!1),"symbol"==typeof t&&this._symbolKeys.add(t)),this},EventEmitter.prototype.prependOnceListener=function(t,e){this.emit===emit&&(this.emit=emitHasOnce);var n=this.onceEvents[t];if(n&&"object"==typeof n)throw new Error("FIXME");return n=this.onceEvents[t]=[e],"symbol"==typeof t&&this._symbolKeys.add(t),this},EventEmitter.prototype.off=removeListener,EventEmitter.prototype.removeAllListeners=function(t){return void 0===t?(this.events=(0,_$utils_7.nullObj)(),this.onceEvents=(0,_$utils_7.nullObj)(),this._symbolKeys=new Set):(this.events[t]=void 0,this.onceEvents[t]=void 0,"symbol"==typeof t&&this._symbolKeys.delete(t)),this},EventEmitter.prototype.setMaxListeners=function(t){return this.maxListeners=t,this},EventEmitter.prototype.getMaxListeners=function(){return this.maxListeners},EventEmitter.prototype.listeners=function(t){return this.emit===emit?this.events[t]?this.events[t].tasksAsArray().slice():[]:this.events[t]&&this.onceEvents[t]?____spreadArray_1(____spreadArray_1([],this.events[t].tasksAsArray(),!0),"function"==typeof this.onceEvents[t]?[this.onceEvents[t]]:this.onceEvents[t],!0):this.events[t]?this.events[t].tasksAsArray():this.onceEvents[t]?"function"==typeof this.onceEvents[t]?[this.onceEvents[t]]:this.onceEvents[t]:[]},EventEmitter.prototype.eventNames=function(){var t=this;if(this.emit===emit){var e=Object.keys(this.events);return ____spreadArray_1(____spreadArray_1([],e,!0),Array.from(this._symbolKeys),!0).filter((function(e){return e in t.events&&t.events[e]&&t.events[e].length}))}e=Object.keys(this.events).filter((function(e){return t.events[e]&&t.events[e].length}));var n=Object.keys(this.onceEvents).filter((function(e){return t.onceEvents[e]&&t.onceEvents[e].length}));return ____spreadArray_1(____spreadArray_1(____spreadArray_1([],e,!0),n,!0),Array.from(this._symbolKeys).filter((function(e){return e in t.events&&t.events[e]&&t.events[e].length||e in t.onceEvents&&t.onceEvents[e]&&t.onceEvents[e].length})),!0)},EventEmitter.prototype.listenerCount=function(t){return this.emit===emit?this.events[t]&&this.events[t].length||0:(this.events[t]&&this.events[t].length||0)+(this.onceEvents[t]&&this.onceEvents[t].length||0)};var _$lib_2={},____createBinding_2=this&&this.__createBinding||(Object.create?function(t,e,n,i){void 0===i&&(i=n);var o=Object.getOwnPropertyDescriptor(e,n);o&&!("get"in o?!e.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,i,o)}:function(t,e,n,i){void 0===i&&(i=n),t[i]=e[n]}),____exportStar_2=this&&this.__exportStar||function(t,e){for(var n in t)"default"===n||Object.prototype.hasOwnProperty.call(e,n)||____createBinding_2(e,t,n)};return Object.defineProperty(_$lib_2,"__esModule",{value:!0}),____exportStar_2(_$types_6,_$lib_2),____exportStar_2(_$ee_1,_$lib_2),_$lib_2}));